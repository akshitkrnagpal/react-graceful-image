!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define(["react"],e);else{var n="object"==typeof exports?e(require("react")):e(t.react);for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(e,n){e.exports=t},function(t,e,n){"use strict";(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.a=n}).call(this,n(2))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r);var i=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},u=n(1),a="object"==typeof self&&self&&self.Object===Object&&self,c=u.a||a||Function("return this")(),l=function(){return c.Date.now()},f=/\s/;var s=function(t){for(var e=t.length;e--&&f.test(t.charAt(e)););return e},d=/^\s+/;var y=function(t){return t?t.slice(0,s(t)+1).replace(d,""):t},p=c.Symbol,h=Object.prototype,v=h.hasOwnProperty,m=h.toString,b=p?p.toStringTag:void 0;var g=function(t){var e=v.call(t,b),n=t[b];try{t[b]=void 0;var r=!0}catch(t){}var o=m.call(t);return r&&(e?t[b]=n:delete t[b]),o},w=Object.prototype.toString;var O=function(t){return w.call(t)},j="[object Null]",A="[object Undefined]",P=p?p.toStringTag:void 0;var E=function(t){return null==t?void 0===t?A:j:P&&P in Object(t)?g(t):O(t)};var S=function(t){return null!=t&&"object"==typeof t},L="[object Symbol]";var x=function(t){return"symbol"==typeof t||S(t)&&E(t)==L},R=NaN,_=/^[-+]0x[0-9a-f]+$/i,I=/^0b[01]+$/i,T=/^0o[0-7]+$/i,D=parseInt;var F=function(t){if("number"==typeof t)return t;if(x(t))return R;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=y(t);var n=I.test(t);return n||T.test(t)?D(t.slice(2),n?2:8):_.test(t)?R:+t},M="Expected a function",k=Math.max,C=Math.min;var z=function(t,e,n){var r,o,u,a,c,f,s=0,d=!1,y=!1,p=!0;if("function"!=typeof t)throw new TypeError(M);function h(e){var n=r,i=o;return r=o=void 0,s=e,a=t.apply(i,n)}function v(t){var n=t-f;return void 0===f||n>=e||n<0||y&&t-s>=u}function m(){var t=l();if(v(t))return b(t);c=setTimeout(m,function(t){var n=e-(t-f);return y?C(n,u-(t-s)):n}(t))}function b(t){return c=void 0,p&&r?h(t):(r=o=void 0,a)}function g(){var t=l(),n=v(t);if(r=arguments,o=this,f=t,n){if(void 0===c)return function(t){return s=t,c=setTimeout(m,e),d?h(t):a}(f);if(y)return clearTimeout(c),c=setTimeout(m,e),h(f)}return void 0===c&&(c=setTimeout(m,e)),a}return e=F(e)||0,i(n)&&(d=!!n.leading,u=(y="maxWait"in n)?k(F(n.maxWait)||0,e):u,p="trailing"in n?!!n.trailing:p),g.cancel=function(){void 0!==c&&clearTimeout(c),s=0,r=f=o=c=void 0},g.flush=function(){return void 0===c?a:b(l())},g},W="Expected a function";var B=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(W);return i(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),z(t,e,{leading:r,maxWait:e,trailing:o})};function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function q(){return(q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach(function(e){Y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function U(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t,e){return!e||"object"!==N(e)&&"function"!=typeof e?K(t):e}function K(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Z=function(t,e){window.addEventListener?window.addEventListener(t,e):window.attachEvent("on"+t,e)},tt=function(t){if(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.top<=(window.innerHeight||document.documentElement.clientHeight)&&e.left<=(window.innerWidth||document.documentElement.clientWidth)}},et=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Q(t,e)}(c,r["Component"]);var e,n,i,u,a=(e=c,function(){var t,n=X(e);if(V()){var r=X(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return J(this,t)});function c(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),Y(K(e=a.call(this,t)),"loadImage",function(){var t=new Image;t.onload=function(){e.setLoaded()},t.onerror=function(){e.handleImageRetries(t)},t.src=e.props.src}),Y(K(e),"lazyLoad",function(){tt(e.imageRef)&&(e.clearEventListeners(),e.loadImage())}),Y(K(e),"setImageRef",function(t){e.imageRef=t}),e._isMounted=!1,e.throttledFunction=B(e.lazyLoad,150),e.state={loaded:!1,retryDelay:e.props.retry.delay,retryCount:1},e}return n=c,(i=[{key:"addAnimationStyles",value:function(){if(!document.head.querySelectorAll("[data-gracefulimage]").length){var t=document.createElement("style");t.setAttribute("data-gracefulimage","exists"),document.head.appendChild(t),t.sheet.insertRule("\n  @keyframes gracefulimage {\n    0%   { opacity: 0.25; }\n    50%  { opacity: 0.5; }\n    100% { opacity: 1; }\n  }\n",t.sheet.cssRules.length)}}},{key:"setLoaded",value:function(){this._isMounted&&this.setState({loaded:!0},this.props.onLoad)}},{key:"componentDidMount",value:function(){var t,e;this._isMounted=!0,this.addAnimationStyles(),this.props.noLazyLoad?this.loadImage():tt(this.imageRef)?this.loadImage():"IntersectionObserver"in window?(t=this.imageRef,e=this.loadImage,new IntersectionObserver(function(n,r){n.forEach(function(n){n.isIntersecting&&(e(),r.unobserve(t))})}).observe(t)):(Z("load",this.throttledFunction),Z("scroll",this.throttledFunction),Z("wheel",this.throttledFunction),Z("resize",this.throttledFunction),Z("gestureend",this.throttledFunction))}},{key:"clearEventListeners",value:function(){this.throttledFunction.cancel(),window.removeEventListener("load",this.throttledFunction),window.removeEventListener("scroll",this.throttledFunction),window.removeEventListener("wheel",this.throttledFunction),window.removeEventListener("resize",this.throttledFunction),window.removeEventListener("gestureend",this.throttledFunction)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.timeout&&window.clearTimeout(this.timeout),this.clearEventListeners()}},{key:"handleImageRetries",value:function(t){var e=this,n=this.props,r=n.src,o=n.retry,i=o.count,u=o.delay,a=o.accumulate,c=n.onError,l=this.state,f=l.retryCount,s=l.retryDelay;this._isMounted&&this.setState({loaded:!1},function(){f<=i?e.timeout=setTimeout(function(){e._isMounted&&(t.src=r,e.setState(function(t){return{retryDelay:"multiply"===a?t.retryDelay*u:"add"===a?t.retryDelay+u:u,retryCount:t.retryCount+1}}))},1e3*s):c()})}},{key:"render",value:function(){var t=this.props,e=t.src,n=t.style,r=t.loading,i=t.placeholderColor,u=t.customPlaceholder,a=t.noPlaceholder,c=(t.noLazyLoad,U(t,["src","style","loading","placeholderColor","customPlaceholder","noPlaceholder","noLazyLoad"])),l=!r&&this.state.loaded,f=l?e:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",s=l?{animationName:"gracefulimage",animationDuration:"0.3s",animationIterationCount:1,animationTimingFunction:"ease-in"}:{background:i};return!l&&a?null:!l&&u?u(this.setImageRef):o.a.createElement("img",q({src:f,style:$({},s,{},n),ref:this.setImageRef},c))}}])&&G(n.prototype,i),u&&G(n,u),c}();et.defaultProps={style:{},loading:!1,placeholderColor:"#eee",retry:{count:8,delay:2,accumulate:"multiply"},customPlaceholder:null,noPlaceholder:!1,noLazyLoad:!1,onLoad:function(){},onError:function(){}};e.default=et}])});